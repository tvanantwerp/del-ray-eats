---
import images from '../../data/images.json';
import Source from './source.astro';
const { slug, alt } = Astro.props;

const sources = images.formats.flatMap(format => {
  return images.resolutions.map(res => {
    return { format, width: res[0], height: res[1] };
  });
});
---

<picture>
  {
    sources.map(source => (
      <Source
        slug={slug}
        format={source.format}
        width={source.width}
        height={source.height}
      />
    ))
  }
  <img
    class="object-cover rounded-t-lg"
    src={`/images/${slug}-400-300.jpg`}
    alt={alt}
    loading="lazy"
    decoding="async"
  />
</picture>
